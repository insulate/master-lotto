‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏∑‡∏≠ Fullstack Developer ‡∏°‡∏∑‡∏≠‡∏≠‡∏≤‡∏ä‡∏µ‡∏û
‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ: React + Vite (Frontend), Node.js + Express (Backend), MongoDB (Database)
‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏ß‡∏¢‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå‡πÅ‡∏ö‡∏ö‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏ä‡∏±‡πâ‡∏ô 3 ‡∏£‡∏∞‡∏î‡∏±‡∏ö (Master ‚Üí Agent ‚Üí Member) ‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏´‡∏ß‡∏¢‡∏´‡∏•‡∏≤‡∏¢‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏≠‡∏°‡∏°‡∏¥‡∏ä‡∏ä‡∏±‡πà‡∏ô‡∏ó‡∏µ‡πà‡∏¢‡∏∑‡∏î‡∏´‡∏¢‡∏∏‡πà‡∏ô‡πÅ‡∏•‡∏∞‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏•‡∏Ç‡∏≠‡∏±‡πâ‡∏ô‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞

‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥:

1. ‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå
2. ‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö API
3. ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î Backend
4. ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î Frontend
5. ‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ flow ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
6. ‡∏Ñ‡∏∏‡∏¢‡∏´‡∏£‡∏∑‡∏≠‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÄ‡∏õ‡πá‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢
7. ‡∏´‡πâ‡∏≤‡∏° commit ‡∏´‡∏£‡∏∑‡∏≠ push ‡πÇ‡∏Ñ‡πâ‡∏î‡πÄ‡∏≠‡∏á‡πÄ‡∏î‡πá‡∏î‡∏Ç‡∏≤‡∏î

# Lottery System Constitution

## 1. ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏£‡∏∞‡∏ö‡∏ö (System Overview)

‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏ß‡∏¢‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå‡πÅ‡∏ö‡∏ö‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏ä‡∏±‡πâ‡∏ô 3 ‡∏£‡∏∞‡∏î‡∏±‡∏ö (Master ‚Üí Agent ‚Üí Member) ‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏´‡∏ß‡∏¢‡∏´‡∏•‡∏≤‡∏¢‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏≠‡∏°‡∏°‡∏¥‡∏ä‡∏ä‡∏±‡πà‡∏ô‡∏ó‡∏µ‡πà‡∏¢‡∏∑‡∏î‡∏´‡∏¢‡∏∏‡πà‡∏ô‡πÅ‡∏•‡∏∞‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏•‡∏Ç‡∏≠‡∏±‡πâ‡∏ô‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞

### 1.1 ‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå

- ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏ß‡∏¢‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå‡πÅ‡∏ö‡∏ö‡∏Ñ‡∏£‡∏ö‡∏ß‡∏á‡∏à‡∏£
- ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏±‡∏ß‡πÅ‡∏ó‡∏ô 3 ‡∏£‡∏∞‡∏î‡∏±‡∏ö (Master ‚Üí Agent ‚Üí Member)
- ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏´‡∏ß‡∏¢‡∏´‡∏•‡∏≤‡∏¢‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó (‡∏£‡∏±‡∏ê‡∏ö‡∏≤‡∏•, ‡∏•‡∏≤‡∏ß‡∏û‡∏±‡∏í‡∏ô‡∏≤, ‡∏Æ‡∏≤‡∏ô‡∏≠‡∏¢)
- ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏≠‡∏°‡∏°‡∏¥‡∏ä‡∏ä‡∏±‡πà‡∏ô‡πÅ‡∏¢‡∏Å‡∏ï‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏´‡∏ß‡∏¢
- ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏•‡∏Ç‡∏≠‡∏±‡πâ‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ ‡∏û‡∏£‡πâ‡∏≠‡∏° Alert
- ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏≠‡∏°‡∏°‡∏¥‡∏ä‡∏ä‡∏±‡πà‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏ï‡∏≤‡∏°‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏ä‡∏±‡πâ‡∏ô

### 1.2 ‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏´‡∏•‡∏±‡∏Å

- **Frontend**: React Vite + JavaScript + Tailwind CSS
- **Backend**: Node.js + Express + JavaScript
- **Database**: MongoDB Atlas
- **ORM**: Mongoose
- **Authentication**: JWT (Access Token + Refresh Token)
- **API Spec**: RESTful API
- **Real-time**: WebSocket (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Alert) - Planning Phase

---

## 2. ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏ä‡∏±‡πâ‡∏ô (Hierarchy Structure)

```
Master (‡πÄ‡∏à‡πâ‡∏≤)
    ‚îî‚îÄ‚îÄ Agent (‡∏ï‡∏±‡∏ß‡πÅ‡∏ó‡∏ô)
        ‚îî‚îÄ‚îÄ Member (‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å)
```

### 2.1 ‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó‡πÅ‡∏•‡∏∞‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà

#### Master (‡πÄ‡∏à‡πâ‡∏≤)

- **‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó**: ‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö, ‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡πÅ‡∏ó‡∏á‡∏´‡∏ß‡∏¢
- **‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå**:
  - ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Agent
  - ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏≠‡∏°‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡πÉ‡∏´‡πâ Agent (‡πÅ‡∏¢‡∏Å‡∏ï‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏´‡∏ß‡∏¢)
  - ‡πÇ‡∏≠‡∏ô‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï‡πÉ‡∏´‡πâ Agent
  - ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏á‡∏ß‡∏î‡∏´‡∏ß‡∏¢ (‡∏ó‡∏∏‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó)
  - ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏•‡∏Ç‡∏≠‡∏±‡πâ‡∏ô (Number Limits)
  - ‡∏õ‡∏¥‡∏î‡∏£‡∏±‡∏ö‡πÅ‡∏ó‡∏á
  - ‡∏≠‡∏≠‡∏Å‡∏ú‡∏•‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•
  - ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏£‡∏∞‡∏ö‡∏ö
  - ‡∏£‡∏±‡∏ö Alert ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏Ç‡πÉ‡∏Å‡∏•‡πâ‡πÄ‡∏ï‡πá‡∏°
- **‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô**:
  - ‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏ó‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏´‡∏•‡∏±‡∏á‡∏´‡∏±‡∏Å‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î)
  - ‡∏à‡πà‡∏≤‡∏¢‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏≠‡∏°‡πÉ‡∏´‡πâ Agent (‡∏à‡∏≤‡∏Å‡∏™‡πà‡∏ß‡∏ô‡∏ï‡πà‡∏≤‡∏á)
  - ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö‡∏à‡πà‡∏≤‡∏¢‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•
  - **‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏≠‡∏°** (‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á)

#### Agent (‡∏ï‡∏±‡∏ß‡πÅ‡∏ó‡∏ô)

- **‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó**: ‡∏ï‡∏±‡∏ß‡∏Å‡∏•‡∏≤‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á Master ‡πÅ‡∏•‡∏∞ Member
- **‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå**:
  - ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Member
  - ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏≠‡∏°‡πÉ‡∏´‡πâ Member (‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô‡∏ó‡∏µ‡πà Master ‡∏Å‡∏≥‡∏´‡∏ô‡∏î)
  - ‡πÇ‡∏≠‡∏ô‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï‡πÉ‡∏´‡πâ Member
  - ‡∏£‡∏±‡∏ö‡πÇ‡∏û‡∏¢‡∏à‡∏≤‡∏Å Member
  - ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡πÉ‡∏ô‡∏™‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á
  - ‡∏î‡∏π‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏•‡∏Ç‡∏≠‡∏±‡πâ‡∏ô
- **‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô**:
  - ‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏≠‡∏°‡∏à‡∏≤‡∏Å‡∏™‡πà‡∏ß‡∏ô‡∏ï‡πà‡∏≤‡∏á = (‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏ó‡∏µ‡πà Master ‡πÉ‡∏´‡πâ) - (‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏ó‡∏µ‡πà‡πÅ‡∏ö‡πà‡∏á‡πÉ‡∏´‡πâ Member)
  - **‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡∏£‡πâ‡∏≤‡∏á Agent ‡∏≠‡∏∑‡πà‡∏ô‡πÑ‡∏î‡πâ**
- **‡∏Ç‡πâ‡∏≠‡∏à‡∏≥‡∏Å‡∏±‡∏î**:
  - Agent ‡∏°‡∏µ‡πÑ‡∏î‡πâ‡πÄ‡∏â‡∏û‡∏≤‡∏∞ Member ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô (‡πÑ‡∏°‡πà‡∏°‡∏µ Agent ‡∏•‡∏π‡∏Å)

#### Member (‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å)

- **‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó**: ‡∏ú‡∏π‡πâ‡πÅ‡∏ó‡∏á‡∏´‡∏ß‡∏¢
- **‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå**:
  - ‡πÅ‡∏ó‡∏á‡∏´‡∏ß‡∏¢ (‡∏ó‡∏∏‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó)
  - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ú‡∏•‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•
  - ‡∏î‡∏π‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÅ‡∏ó‡∏á
  - ‡∏î‡∏π‡∏¢‡∏≠‡∏î‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï
- **‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô**:
  - ‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏≠‡∏° (‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î) ‡∏à‡∏≤‡∏Å Agent
  - ‡∏à‡πà‡∏≤‡∏¢‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏ó‡∏á‡∏´‡∏•‡∏±‡∏á‡∏´‡∏±‡∏Å‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î
- **‡∏Ç‡πâ‡∏≠‡∏à‡∏≥‡∏Å‡∏±‡∏î**:
  - ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡∏£‡πâ‡∏≤‡∏á downline ‡πÉ‡∏î‡πÜ

---

## 3. ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏´‡∏ß‡∏¢ (Lottery Categories)

### 3.1 ‡∏´‡∏ß‡∏¢‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö

| ‡∏£‡∏´‡∏±‡∏™            | ‡∏ä‡∏∑‡πà‡∏≠      | ‡∏ß‡∏±‡∏ô‡∏≠‡∏≠‡∏Å‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•       | ‡πÄ‡∏ß‡∏•‡∏≤‡∏õ‡∏¥‡∏î‡∏£‡∏±‡∏ö |
| --------------- | --------- | ------------------ | ---------- |
| `government`    | ‡∏£‡∏±‡∏ê‡∏ö‡∏≤‡∏•    | 1, 16 ‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏∑‡∏≠‡∏ô     | 14:30      |
| `lao_pattana`   | ‡∏•‡∏≤‡∏ß‡∏û‡∏±‡∏í‡∏ô‡∏≤  | ‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå, ‡∏û‡∏∏‡∏ò, ‡∏®‡∏∏‡∏Å‡∏£‡πå | 19:30      |
| `hanoi_regular` | ‡∏Æ‡∏≤‡∏ô‡∏≠‡∏¢‡∏õ‡∏Å‡∏ï‡∏¥ | ‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô             | 17:30      |
| `hanoi_vip`     | ‡∏Æ‡∏≤‡∏ô‡∏≠‡∏¢VIP  | ‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô             | 18:30      |

### 3.2 ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡πÅ‡∏ó‡∏á (Bet Types)

‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏´‡∏ß‡∏¢‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö:

| ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó    | ‡∏£‡∏´‡∏±‡∏™           | ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç | ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á | ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏à‡πà‡∏≤‡∏¢‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô |
| --------- | -------------- | ----------- | -------- | ----------------- |
| 3 ‡∏ï‡∏±‡∏ß‡∏ö‡∏ô   | `three_top`    | 3 ‡∏´‡∏•‡∏±‡∏Å      | 123      | 1:850             |
| 3 ‡∏ï‡∏±‡∏ß‡πÇ‡∏ï‡πä‡∏î | `three_tod`    | 3 ‡∏´‡∏•‡∏±‡∏Å      | 456      | 1:150             |
| 2 ‡∏ï‡∏±‡∏ß‡∏ö‡∏ô   | `two_top`      | 2 ‡∏´‡∏•‡∏±‡∏Å      | 12       | 1:90              |
| 2 ‡∏ï‡∏±‡∏ß‡∏•‡πà‡∏≤‡∏á | `two_bottom`   | 2 ‡∏´‡∏•‡∏±‡∏Å      | 34       | 1:90              |
| ‡∏ß‡∏¥‡πà‡∏á‡∏ö‡∏ô    | `run_top`      | 1 ‡∏´‡∏•‡∏±‡∏Å      | 5        | 1:3.5             |
| ‡∏ß‡∏¥‡πà‡∏á‡∏•‡πà‡∏≤‡∏á  | `run_bottom`   | 1 ‡∏´‡∏•‡∏±‡∏Å      | 6        | 1:4.5             |

_‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏à‡πà‡∏≤‡∏¢‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏á‡πÑ‡∏î‡πâ‡πÅ‡∏¢‡∏Å‡∏ï‡∏≤‡∏°‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏´‡∏ß‡∏¢_

---

## 4. ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏≠‡∏°‡∏°‡∏¥‡∏ä‡∏ä‡∏±‡πà‡∏ô (Commission System)

### 4.1 ‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç

> **‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏≠‡∏° = ‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î (Commission = Discount)**
>
> ‡πÄ‡∏°‡∏∑‡πà‡∏≠ Agent "‡πÉ‡∏´‡πâ‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏≠‡∏° 5%" ‡∏Å‡∏±‡∏ö Member = Member "‡πÑ‡∏î‡πâ‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î 5%"

### 4.2 ‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏≠‡∏°

```
Master ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡πÉ‡∏´‡πâ Agent (‡πÅ‡∏¢‡∏Å‡∏ï‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏´‡∏ß‡∏¢)
    ‚Üì
Agent ‡πÅ‡∏ö‡πà‡∏á‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏≠‡∏°‡πÉ‡∏´‡πâ Member (‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô‡∏ó‡∏µ‡πà Master ‡πÉ‡∏´‡πâ)
    ‚Üì
Agent ‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å‡∏™‡πà‡∏ß‡∏ô‡∏ï‡πà‡∏≤‡∏á = (‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏à‡∏≤‡∏Å Master) - (‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏´‡πâ Member)
```

### 4.3 ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏≠‡∏°

**Master ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÉ‡∏´‡πâ Agent:**

```javascript
{
  three_top: 10,      // 3 ‡∏ï‡∏±‡∏ß‡∏ö‡∏ô 10%
  three_tod: 10,      // 3 ‡∏ï‡∏±‡∏ß‡πÇ‡∏ï‡πä‡∏î 10%
  two_top: 8,         // 2 ‡∏ï‡∏±‡∏ß‡∏ö‡∏ô 8%
  two_bottom: 8,      // 2 ‡∏ï‡∏±‡∏ß‡∏•‡πà‡∏≤‡∏á 8%
  run_top: 5,         // ‡∏ß‡∏¥‡πà‡∏á‡∏ö‡∏ô 5%
  run_bottom: 5       // ‡∏ß‡∏¥‡πà‡∏á‡∏•‡πà‡∏≤‡∏á 5%
}
```

**Agent ‡πÅ‡∏ö‡πà‡∏á‡πÉ‡∏´‡πâ Member:**

```javascript
{
  three_top: 6,       // 3 ‡∏ï‡∏±‡∏ß‡∏ö‡∏ô 6% (‚â§ 10%)
  three_tod: 6,       // 3 ‡∏ï‡∏±‡∏ß‡πÇ‡∏ï‡πä‡∏î 6% (‚â§ 10%)
  two_top: 5,         // 2 ‡∏ï‡∏±‡∏ß‡∏ö‡∏ô 5% (‚â§ 8%)
  two_bottom: 5,      // 2 ‡∏ï‡∏±‡∏ß‡∏•‡πà‡∏≤‡∏á 5% (‚â§ 8%)
  run_top: 3,         // ‡∏ß‡∏¥‡πà‡∏á‡∏ö‡∏ô 3% (‚â§ 5%)
  run_bottom: 3       // ‡∏ß‡∏¥‡πà‡∏á‡∏•‡πà‡∏≤‡∏á 3% (‚â§ 5%)
}
```

### 4.4 ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì

#### ‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà 1: Member ‡πÅ‡∏ó‡∏á 3 ‡∏ï‡∏±‡∏ß‡∏ö‡∏ô 100 ‡∏ö‡∏≤‡∏ó

**‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç:**

- Master ‡πÉ‡∏´‡πâ Agent: 10%
- Agent ‡πÉ‡∏´‡πâ Member: 6%

**‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì:**

1. **Member:**
   - ‡∏¢‡∏≠‡∏î‡πÅ‡∏ó‡∏á: 100 ‡∏ö‡∏≤‡∏ó
   - ‡πÑ‡∏î‡πâ‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î: 6%
   - ‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î: 100 √ó 6% = 6 ‡∏ö‡∏≤‡∏ó
   - **‡∏à‡πà‡∏≤‡∏¢‡∏à‡∏£‡∏¥‡∏á: 94 ‡∏ö‡∏≤‡∏ó**

2. **Agent:**
   - ‡πÑ‡∏î‡πâ‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏≠‡∏°‡∏à‡∏≤‡∏Å Master: 10%
   - ‡πÅ‡∏ö‡πà‡∏á‡πÉ‡∏´‡πâ Member: 6%
   - ‡∏™‡πà‡∏ß‡∏ô‡∏ï‡πà‡∏≤‡∏á: 10% - 6% = 4%
   - **Agent ‡πÑ‡∏î‡πâ: 100 √ó 4% = 4 ‡∏ö‡∏≤‡∏ó**

3. **Master:**
   - ‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏à‡∏≤‡∏Å Member: 94 ‡∏ö‡∏≤‡∏ó
   - ‡∏à‡πà‡∏≤‡∏¢‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏≠‡∏°‡πÉ‡∏´‡πâ Agent: 4 ‡∏ö‡∏≤‡∏ó
   - **Master ‡πÄ‡∏´‡∏•‡∏∑‡∏≠: 94 - 4 = 90 ‡∏ö‡∏≤‡∏ó** (‡∏£‡∏±‡∏ö‡πÅ‡∏ó‡∏á‡πÑ‡∏ß‡πâ)

4. **‡∏ñ‡πâ‡∏≤ Member ‡∏ñ‡∏π‡∏Å‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏• (‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏à‡πà‡∏≤‡∏¢ 1:850):**
   - ‡πÄ‡∏á‡∏¥‡∏ô‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏• = 100 √ó 850 = **85,000 ‡∏ö‡∏≤‡∏ó**
   - Master ‡∏ï‡πâ‡∏≠‡∏á‡∏à‡πà‡∏≤‡∏¢: 85,000 ‡∏ö‡∏≤‡∏ó

#### ‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà 2: Member ‡πÅ‡∏ó‡∏á 2 ‡∏ï‡∏±‡∏ß‡∏ö‡∏ô 200 ‡∏ö‡∏≤‡∏ó

**‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç:**

- Master ‡πÉ‡∏´‡πâ Agent: 8%
- Agent ‡πÉ‡∏´‡πâ Member: 5%

**‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì:**

1. **Member:**
   - ‡∏¢‡∏≠‡∏î‡πÅ‡∏ó‡∏á: 200 ‡∏ö‡∏≤‡∏ó
   - ‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î: 200 √ó 5% = 10 ‡∏ö‡∏≤‡∏ó
   - **‡∏à‡πà‡∏≤‡∏¢‡∏à‡∏£‡∏¥‡∏á: 190 ‡∏ö‡∏≤‡∏ó**

2. **Agent:**
   - ‡∏™‡πà‡∏ß‡∏ô‡∏ï‡πà‡∏≤‡∏á: 8% - 5% = 3%
   - **Agent ‡πÑ‡∏î‡πâ: 200 √ó 3% = 6 ‡∏ö‡∏≤‡∏ó**

3. **Master:**
   - ‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô: 190 ‡∏ö‡∏≤‡∏ó
   - ‡∏à‡πà‡∏≤‡∏¢‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏≠‡∏°: 6 ‡∏ö‡∏≤‡∏ó
   - **Master ‡πÄ‡∏´‡∏•‡∏∑‡∏≠: 184 ‡∏ö‡∏≤‡∏ó**

### 4.5 ‡∏Å‡∏é‡∏Å‡∏≤‡∏£‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏≠‡∏±‡∏ï‡∏£‡∏≤

1. ‚úÖ **Downline ‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏î‡πâ‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤ Upline ‡πÄ‡∏™‡∏°‡∏≠**

   ```
   ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á:  Master 10% ‚Üí Agent 6%
   ‡∏ú‡∏¥‡∏î:      Master 10% ‚Üí Agent 12% ‚ùå
   ```

2. ‚úÖ **‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏´‡∏ß‡∏¢‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡πÅ‡∏¢‡∏Å‡∏Å‡∏±‡∏ô‡πÑ‡∏î‡πâ**

   ```
   Agent ‡πÉ‡∏´‡πâ Member:
   - 3 ‡∏ï‡∏±‡∏ß‡∏ö‡∏ô: 8%
   - 2 ‡∏ï‡∏±‡∏ß‡∏ö‡∏ô: 5%
   - ‡∏ß‡∏¥‡πà‡∏á‡∏ö‡∏ô: 3%
   ```

3. ‚úÖ **‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô‡∏ó‡∏µ‡πà Master ‡∏Å‡∏≥‡∏´‡∏ô‡∏î**
   ```
   ‡∏ñ‡πâ‡∏≤ Master ‡πÉ‡∏´‡πâ Agent: 3 ‡∏ï‡∏±‡∏ß‡∏ö‡∏ô 10%
   Agent ‡πÉ‡∏´‡πâ Member ‡πÑ‡∏î‡πâ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î: 10%
   ```

---

## 5. ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏•‡∏Ç‡∏≠‡∏±‡πâ‡∏ô (Number Limit System)

### 5.1 ‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô

**‡πÄ‡∏•‡∏Ç‡∏≠‡∏±‡πâ‡∏ô = ‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏¢‡∏≠‡∏î‡∏£‡∏±‡∏ö‡∏ã‡∏∑‡πâ‡∏≠‡∏ï‡πà‡∏≠‡πÄ‡∏•‡∏Ç ‡∏ï‡πà‡∏≠‡∏á‡∏ß‡∏î**

- Master ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ß‡πà‡∏≤‡πÅ‡∏ï‡πà‡∏•‡∏∞‡πÄ‡∏•‡∏Ç‡∏£‡∏±‡∏ö‡∏ã‡∏∑‡πâ‡∏≠‡πÑ‡∏î‡πâ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà
- ‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏£‡∏∞‡∏ö‡∏ö (‡πÑ‡∏°‡πà‡πÅ‡∏¢‡∏Å‡∏ï‡∏≤‡∏° Agent)
- ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏á‡∏ß‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÉ‡∏´‡∏°‡πà

### 5.2 ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡πâ‡∏ô

#### 5.2.1 ‡∏≠‡∏±‡πâ‡∏ô‡πÄ‡∏•‡∏Ç‡πÄ‡∏â‡∏û‡∏≤‡∏∞ (Specific Number Limit)

```
‡πÄ‡∏•‡∏Ç 456 (3 ‡∏ï‡∏±‡∏ß‡∏ö‡∏ô) - ‡∏£‡∏±‡∏ö‡∏ã‡∏∑‡πâ‡∏≠‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 10,000 ‡∏ö‡∏≤‡∏ó
```

#### 5.2.2 ‡∏≠‡∏±‡πâ‡∏ô‡∏ó‡∏∏‡∏Å‡πÄ‡∏•‡∏Ç‡πÉ‡∏ô‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó (Global Type Limit)

```
3 ‡∏ï‡∏±‡∏ß‡∏ö‡∏ô - ‡∏ó‡∏∏‡∏Å‡πÄ‡∏•‡∏Ç ‡∏£‡∏±‡∏ö‡∏ã‡∏∑‡πâ‡∏≠‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 50,000 ‡∏ö‡∏≤‡∏ó/‡πÄ‡∏•‡∏Ç
2 ‡∏ï‡∏±‡∏ß‡∏ö‡∏ô - ‡∏ó‡∏∏‡∏Å‡πÄ‡∏•‡∏Ç ‡∏£‡∏±‡∏ö‡∏ã‡∏∑‡πâ‡∏≠‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 30,000 ‡∏ö‡∏≤‡∏ó/‡πÄ‡∏•‡∏Ç
```

#### 5.2.3 ‡∏õ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç (Block Number)

```
‡πÄ‡∏•‡∏Ç 123 - ‡∏õ‡∏¥‡∏î‡∏£‡∏±‡∏ö (‡πÑ‡∏°‡πà‡∏£‡∏±‡∏ö‡∏ã‡∏∑‡πâ‡∏≠‡πÄ‡∏•‡∏¢)
```

### 5.3 ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô

#### ‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå 1: ‡∏ã‡∏∑‡πâ‡∏≠‡πÄ‡∏•‡∏Ç‡∏≠‡∏±‡πâ‡∏ô ‚úÖ

**‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç:**

- ‡∏á‡∏ß‡∏î‡∏£‡∏±‡∏ê‡∏ö‡∏≤‡∏• 1 ‡∏Å.‡∏û. 2025
- ‡πÄ‡∏•‡∏Ç 456 (3 ‡∏ï‡∏±‡∏ß‡∏ö‡∏ô) ‡∏≠‡∏±‡πâ‡∏ô‡πÑ‡∏ß‡πâ: 10,000 ‡∏ö‡∏≤‡∏ó
- ‡∏¢‡∏≠‡∏î‡∏ã‡∏∑‡πâ‡∏≠‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô: 9,000 ‡∏ö‡∏≤‡∏ó

**‡∏ú‡∏•:**

| ‡∏Å‡∏≤‡∏£‡∏ã‡∏∑‡πâ‡∏≠           | ‡∏¢‡∏≠‡∏î       | ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå          | ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏£‡∏±‡∏ö‡πÑ‡∏î‡πâ |
| ----------------- | --------- | ---------------- | ----------- |
| Member A ‡∏ã‡∏∑‡πâ‡∏≠ 456 | 2,000 ‡∏ö‡∏≤‡∏ó | ‚ùå ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ (‡πÄ‡∏Å‡∏¥‡∏ô) | -           |
| Member A ‡∏ã‡∏∑‡πâ‡∏≠ 456 | 1,000 ‡∏ö‡∏≤‡∏ó | ‚úÖ ‡πÑ‡∏î‡πâ (‡∏û‡∏≠‡∏î‡∏µ)    | 0           |
| Member A ‡∏ã‡∏∑‡πâ‡∏≠ 456 | 500 ‡∏ö‡∏≤‡∏ó   | ‚úÖ ‡πÑ‡∏î‡πâ           | 500 ‡∏ö‡∏≤‡∏ó     |

**‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì:**

```
‡∏¢‡∏≠‡∏î‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô: 9,000 ‡∏ö‡∏≤‡∏ó
‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ã‡∏∑‡πâ‡∏≠: 2,000 ‡∏ö‡∏≤‡∏ó
‡∏£‡∏ß‡∏°: 11,000 ‡∏ö‡∏≤‡∏ó
‡∏à‡∏≥‡∏Å‡∏±‡∏î: 10,000 ‡∏ö‡∏≤‡∏ó

11,000 > 10,000 ‚ùå ‡πÑ‡∏°‡πà‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥

‡∏ã‡∏∑‡πâ‡∏≠‡πÑ‡∏î‡πâ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î: 10,000 - 9,000 = 1,000 ‡∏ö‡∏≤‡∏ó
```

#### ‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå 2: ‡∏´‡∏•‡∏≤‡∏¢‡∏Ñ‡∏ô‡∏ã‡∏∑‡πâ‡∏≠‡πÄ‡∏•‡∏Ç‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô

**‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç:**

- ‡πÄ‡∏•‡∏Ç 789 ‡∏≠‡∏±‡πâ‡∏ô‡πÑ‡∏ß‡πâ: 20,000 ‡∏ö‡∏≤‡∏ó
- ‡∏¢‡∏≠‡∏î‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô: 0 ‡∏ö‡∏≤‡∏ó

**‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ã‡∏∑‡πâ‡∏≠:**

| ‡∏•‡∏≥‡∏î‡∏±‡∏ö | ‡∏ú‡∏π‡πâ‡∏ã‡∏∑‡πâ‡∏≠  | ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô  | ‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏° | ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞                      |
| ----- | -------- | ------ | ------ | -------------------------- |
| 1     | Member A | 5,000  | 5,000  | ‚úÖ ‡∏ú‡πà‡∏≤‡∏ô                    |
| 2     | Member B | 8,000  | 13,000 | ‚úÖ ‡∏ú‡πà‡∏≤‡∏ô                    |
| 3     | Member C | 10,000 | 23,000 | ‚ùå ‡πÄ‡∏Å‡∏¥‡∏ô (‡∏£‡∏±‡∏ö‡πÑ‡∏î‡πâ 7,000)     |
| 4     | Member D | 5,000  | 20,000 | ‚úÖ ‡∏ú‡πà‡∏≤‡∏ô (‡∏ñ‡πâ‡∏≤ C ‡∏ã‡∏∑‡πâ‡∏≠ 7,000) |

#### ‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå 3: ‡πÄ‡∏•‡∏Ç‡∏õ‡∏¥‡∏î‡∏£‡∏±‡∏ö ‚ùå

**‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç:**

- ‡πÄ‡∏•‡∏Ç 123 (3 ‡∏ï‡∏±‡∏ß‡∏ö‡∏ô) ‡∏õ‡∏¥‡∏î‡∏£‡∏±‡∏ö (is_blocked = true)

**‡∏ú‡∏•:**

```
Member ‡∏ã‡∏∑‡πâ‡∏≠‡πÄ‡∏•‡∏Ç 123 ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà‡∏Å‡πá‡∏ï‡∏≤‡∏°
‚Üí ‚ùå ‡πÑ‡∏°‡πà‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
‚Üí Error: "‡πÄ‡∏•‡∏Ç 123 ‡∏õ‡∏¥‡∏î‡∏£‡∏±‡∏ö‡∏ã‡∏∑‡πâ‡∏≠"
```

### 5.4 ‡∏£‡∏∞‡∏ö‡∏ö Alert (‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô)

#### Alert Level 1: ‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ó‡∏µ‡πà 80% üü°

```
‡πÄ‡∏•‡∏Ç 456 ‡∏ã‡∏∑‡πâ‡∏≠‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß 8,000/10,000 ‡∏ö‡∏≤‡∏ó (80%)
‚Üí ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô Master
```

#### Alert Level 2: ‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ó‡∏µ‡πà 90% üü†

```
‡πÄ‡∏•‡∏Ç 456 ‡∏ã‡∏∑‡πâ‡∏≠‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß 9,000/10,000 ‡∏ö‡∏≤‡∏ó (90%)
‚Üí ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô Master (‡πÄ‡∏£‡πà‡∏á‡∏î‡πà‡∏ß‡∏ô)
```

#### Alert Level 3: ‡πÄ‡∏ï‡πá‡∏° 100% üî¥

```
‡πÄ‡∏•‡∏Ç 456 ‡∏ã‡∏∑‡πâ‡∏≠‡πÄ‡∏ï‡πá‡∏° 10,000/10,000 ‡∏ö‡∏≤‡∏ó (100%)
‚Üí ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô Master
‚Üí ‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡∏¥‡∏î‡∏£‡∏±‡∏ö‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
```

**‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô:**

- ‚úâÔ∏è Real-time notification (WebSocket)
- üîî In-app notification

### 5.5 ‡πÄ‡∏•‡∏Ç‡∏≠‡∏±‡πâ‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô (Default Limits)

Master ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏•‡∏Ç‡∏≠‡∏±‡πâ‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÑ‡∏î‡πâ:

```javascript
// ‡πÄ‡∏•‡∏Ç‡∏≠‡∏±‡πâ‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏´‡∏ß‡∏¢‡∏£‡∏±‡∏ê‡∏ö‡∏≤‡∏•
{
  category: 'government',
  limits: {
    three_top: 50000,    // ‡∏ó‡∏∏‡∏Å‡πÄ‡∏•‡∏Ç 3 ‡∏ï‡∏±‡∏ß‡∏ö‡∏ô ‡∏£‡∏±‡∏ö‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 50,000
    three_tod: 30000,
    two_top: 80000,
    two_bottom: 80000,
    run_top: 200000,
    run_bottom: 200000
  }
}

// ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏á‡∏ß‡∏î‡πÉ‡∏´‡∏°‡πà ‡∏à‡∏∞ copy ‡∏Ñ‡πà‡∏≤‡πÄ‡∏´‡∏•‡πà‡∏≤‡∏ô‡∏µ‡πâ‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
```

---

## 6. ‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏ó‡∏á‡∏´‡∏ß‡∏¢ (Betting Process)

### 6.1 ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏ó‡∏á

```mermaid
graph TD
    A[Member ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏•‡∏Ç‡πÅ‡∏•‡∏∞‡∏à‡∏≥‡∏ô‡∏ß‡∏ô] --> B[‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï]
    B --> C{‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï‡∏û‡∏≠?}
    C -->|‡πÑ‡∏°‡πà| Z1[‚ùå ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï‡πÑ‡∏°‡πà‡∏û‡∏≠]
    C -->|‡πÉ‡∏ä‡πà| D[‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏á‡∏ß‡∏î]
    D --> E{‡∏á‡∏ß‡∏î‡πÄ‡∏õ‡∏¥‡∏î‡∏£‡∏±‡∏ö?}
    E -->|‡πÑ‡∏°‡πà| Z2[‚ùå ‡πÅ‡∏à‡πâ‡∏á‡∏á‡∏ß‡∏î‡∏õ‡∏¥‡∏î‡πÅ‡∏•‡πâ‡∏ß]
    E -->|‡πÉ‡∏ä‡πà| F[‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏•‡∏Ç‡∏≠‡∏±‡πâ‡∏ô]
    F --> G{‡πÄ‡∏•‡∏Ç‡∏≠‡∏±‡πâ‡∏ô?}
    G -->|‡∏õ‡∏¥‡∏î‡∏£‡∏±‡∏ö| Z3[‚ùå ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏•‡∏Ç‡∏õ‡∏¥‡∏î‡∏£‡∏±‡∏ö]
    G -->|‡πÄ‡∏Å‡∏¥‡∏ô‡∏à‡∏≥‡∏Å‡∏±‡∏î| Z4[‚ùå ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏Å‡∏¥‡∏ô‡∏à‡∏≥‡∏Å‡∏±‡∏î + ‡πÅ‡∏™‡∏î‡∏á‡∏¢‡∏≠‡∏î‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡πÑ‡∏î‡πâ]
    G -->|‡∏ú‡πà‡∏≤‡∏ô| H[‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î]
    H --> I[‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏≠‡∏° Agent]
    I --> J[‡∏´‡∏±‡∏Å‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï Member]
    J --> K[‡∏™‡∏£‡πâ‡∏≤‡∏á Ticket]
    K --> L[‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏≠‡∏° Agent]
    L --> M[‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏¢‡∏≠‡∏î‡πÄ‡∏•‡∏Ç‡∏≠‡∏±‡πâ‡∏ô]
    M --> N{‡∏¢‡∏≠‡∏î‡πÄ‡∏•‡∏Ç ‚â• 80%?}
    N -->|‡πÉ‡∏ä‡πà| O[‡∏™‡πà‡∏á Alert]
    N -->|‡πÑ‡∏°‡πà| P[‚úÖ ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô]
    O --> P
```

### 6.2 ‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö (Validations)

#### ‡∏Å‡πà‡∏≠‡∏ô‡πÅ‡∏ó‡∏á:

1. ‚úÖ **‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠** - Member ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï ‚â• (‡∏¢‡∏≠‡∏î‡πÅ‡∏ó‡∏á - ‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î)
2. ‚úÖ **‡∏á‡∏ß‡∏î‡πÄ‡∏õ‡∏¥‡∏î‡∏£‡∏±‡∏ö** - lottery.status = 'open'
3. ‚úÖ **‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏õ‡∏¥‡∏î‡∏£‡∏±‡∏ö** - now < lottery.close_time
4. ‚úÖ **‡πÄ‡∏•‡∏Ç‡πÑ‡∏°‡πà‡∏õ‡∏¥‡∏î‡∏£‡∏±‡∏ö** - is_blocked = false
5. ‚úÖ **‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô‡πÄ‡∏•‡∏Ç‡∏≠‡∏±‡πâ‡∏ô** - current_amount + bet_amount ‚â§ max_amount
6. ‚úÖ **Format ‡πÄ‡∏•‡∏Ç‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á** - 3 ‡∏ï‡∏±‡∏ß‡∏ö‡∏ô = XXX, 2 ‡∏ï‡∏±‡∏ß‡∏ö‡∏ô = XX, etc.
7. ‚úÖ **‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô > 0** - bet_amount > 0

#### ‡∏´‡∏•‡∏±‡∏á‡πÅ‡∏ó‡∏á:

1. ‚úÖ **‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å Ticket**
2. ‚úÖ **‡∏´‡∏±‡∏Å‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï Member**
3. ‚úÖ **‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏≠‡∏° Agent**
4. ‚úÖ **‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏¢‡∏≠‡∏î‡πÄ‡∏•‡∏Ç‡∏≠‡∏±‡πâ‡∏ô**
5. ‚úÖ **‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å Transaction**
6. ‚úÖ **‡∏™‡πà‡∏á Alert (‡∏ñ‡πâ‡∏≤‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô)**

### 6.3 ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á Request/Response

#### Request: ‡πÅ‡∏ó‡∏á‡∏´‡∏ß‡∏¢

```json
POST /api/v1/tickets

{
  "lottery_id": "uuid-lottery-1",
  "bet_type": "three_top",
  "number": "456",
  "bet_amount": 1000
}
```

#### Response: ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‚úÖ

```json
{
  "id": "uuid-ticket-1",
  "lottery_id": "uuid-lottery-1",
  "bet_type": "three_top",
  "number": "456",
  "bet_amount": 1000,
  "discount_amount": 60,
  "net_amount": 940,
  "agent_commission": 40,
  "status": "pending",
  "created_at": "2025-02-01T10:30:00Z"
}
```

#### Response: ‡πÄ‡∏Å‡∏¥‡∏ô‡πÄ‡∏•‡∏Ç‡∏≠‡∏±‡πâ‡∏ô ‚ùå

```json
{
  "error": "LIMIT_EXCEEDED",
  "message": "‡πÄ‡∏•‡∏Ç 456 ‡∏£‡∏±‡∏ö‡∏ã‡∏∑‡πâ‡∏≠‡πÄ‡∏Å‡∏¥‡∏ô‡∏à‡∏≥‡∏Å‡∏±‡∏î",
  "details": {
    "number": "456",
    "bet_type": "three_top",
    "requested_amount": 2000,
    "current_amount": 9000,
    "limit": 10000,
    "max_allowed": 1000
  }
}
```

#### Response: ‡πÄ‡∏•‡∏Ç‡∏õ‡∏¥‡∏î‡∏£‡∏±‡∏ö ‚ùå

```json
{
  "error": "NUMBER_BLOCKED",
  "message": "‡πÄ‡∏•‡∏Ç 123 ‡∏õ‡∏¥‡∏î‡∏£‡∏±‡∏ö‡∏ã‡∏∑‡πâ‡∏≠",
  "details": {
    "number": "123",
    "bet_type": "three_top"
  }
}
```

### 6.4 ‡∏Å‡∏≤‡∏£‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡πÇ‡∏û‡∏¢

**‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç:**

- ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡πÑ‡∏î‡πâ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Å‡πà‡∏≠‡∏ô‡∏õ‡∏¥‡∏î‡∏£‡∏±‡∏ö‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
- ‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏Ñ‡∏∑‡∏ô‡πÄ‡∏ï‡πá‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô
- ‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏≠‡∏°‡∏ó‡∏µ‡πà‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÑ‡∏ß‡πâ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏•‡∏ö
- ‡∏¢‡∏≠‡∏î‡πÄ‡∏•‡∏Ç‡∏≠‡∏±‡πâ‡∏ô‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏•‡∏î

**Process:**

```
1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏õ‡∏¥‡∏î‡∏£‡∏±‡∏ö
2. ‡∏Ñ‡∏∑‡∏ô‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï‡πÉ‡∏´‡πâ Member
3. ‡∏•‡∏ö‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏≠‡∏° Agent
4. ‡∏•‡∏î‡∏¢‡∏≠‡∏î‡πÄ‡∏•‡∏Ç‡∏≠‡∏±‡πâ‡∏ô
5. ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏õ‡πá‡∏ô 'cancelled'
6. ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å Transaction
```

---

## 7. ‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡∏ú‡∏•‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏• (Draw Process)

### 7.1 ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡∏ú‡∏•

```
1. Master ‡∏õ‡∏¥‡∏î‡∏£‡∏±‡∏ö‡πÅ‡∏ó‡∏á
    ‚Üì
2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏õ‡∏¥‡∏î‡∏£‡∏±‡∏ö‡πÅ‡∏•‡πâ‡∏ß (status = 'closed')
    ‚Üì
3. Master ‡∏õ‡πâ‡∏≠‡∏ô‡∏ú‡∏•‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•
    ‚Üì
4. ‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Tickets ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô‡∏á‡∏ß‡∏î‡∏ô‡∏µ‡πâ
    ‚Üì
5. ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡πÄ‡∏•‡∏Ç‡πÅ‡∏ó‡∏á‡∏Å‡∏±‡∏ö‡∏ú‡∏•‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•
    ‚Üì
6. ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏á‡∏¥‡∏ô‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•
    ‚Üì
7. ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡∏ñ‡∏π‡∏Å‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•
    ‚Üì
8. ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ Tickets
    ‚Üì
9. ‡∏™‡∏£‡πâ‡∏≤‡∏á Winners Record
    ‚Üì
10. ‡∏™‡∏£‡πâ‡∏≤‡∏á Credit Transactions
```

### 7.2 ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏ú‡∏•‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•

```json
{
  "three_top": "123",
  "three_tod": ["456", "789", "012"],
  "two_top": "12",
  "two_bottom": "34",
  "run_top": ["1", "5", "9"],
  "run_bottom": ["2", "6", "8"]
}
```

### 7.3 Logic ‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö

#### 3 ‡∏ï‡∏±‡∏ß‡∏ö‡∏ô

```javascript
ticket.bet_type === 'three_top' && ticket.number === results.three_top;
// ‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏£‡∏á‡∏ó‡∏∏‡∏Å‡∏´‡∏•‡∏±‡∏Å
```

#### 3 ‡∏ï‡∏±‡∏ß‡πÇ‡∏ï‡πä‡∏î

```javascript
ticket.bet_type === 'three_tod' && results.three_tod.includes(ticket.number);
// ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô array ‡∏Ç‡∏≠‡∏á 3 ‡∏ï‡∏±‡∏ß‡πÇ‡∏ï‡πä‡∏î
```

#### 2 ‡∏ï‡∏±‡∏ß‡∏ö‡∏ô

```javascript
ticket.bet_type === 'two_top' && ticket.number === results.two_top;
// ‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏£‡∏á‡∏ó‡∏∏‡∏Å‡∏´‡∏•‡∏±‡∏Å
```

#### ‡∏ß‡∏¥‡πà‡∏á‡∏ö‡∏ô

```javascript
ticket.bet_type === 'run_top' && results.run_top.includes(ticket.number);
// ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô array ‡∏Ç‡∏≠‡∏á‡∏ß‡∏¥‡πà‡∏á‡∏ö‡∏ô
```

### 7.4 ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•

**‡∏ú‡∏•‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•:**

```json
{
  "three_top": "456",
  "two_top": "45"
}
```

**Tickets:**

```
1. Member A ‡πÅ‡∏ó‡∏á 456 (3 ‡∏ï‡∏±‡∏ß‡∏ö‡∏ô) 100 ‡∏ö‡∏≤‡∏ó
2. Member B ‡πÅ‡∏ó‡∏á 123 (3 ‡∏ï‡∏±‡∏ß‡∏ö‡∏ô) 200 ‡∏ö‡∏≤‡∏ó
3. Member C ‡πÅ‡∏ó‡∏á 45 (2 ‡∏ï‡∏±‡∏ß‡∏ö‡∏ô) 50 ‡∏ö‡∏≤‡∏ó
```

**‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à:**

| Ticket   | ‡πÄ‡∏•‡∏Ç‡πÅ‡∏ó‡∏á | ‡∏ñ‡∏π‡∏Å/‡∏ú‡∏¥‡∏î   | ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏à‡πà‡∏≤‡∏¢ | ‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•                 |
| -------- | ------ | --------- | --------- | ---------------------- |
| Member A | 456    | ‚úÖ ‡∏ñ‡∏π‡∏Å    | 1:850     | 100 √ó 850 = 85,000 ‡∏ö‡∏≤‡∏ó |
| Member B | 123    | ‚ùå ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å | -         | 0 ‡∏ö‡∏≤‡∏ó                  |
| Member C | 45     | ‚úÖ ‡∏ñ‡∏π‡∏Å    | 1:90      | 50 √ó 90 = 4,500 ‡∏ö‡∏≤‡∏ó    |

**Master ‡∏ï‡πâ‡∏≠‡∏á‡∏à‡πà‡∏≤‡∏¢:**

```
‡∏£‡∏ß‡∏°‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏• = 85,000 + 4,500 = 89,500 ‡∏ö‡∏≤‡∏ó
```

---

## 8. ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï (Credit System)

### 8.1 ‡∏Å‡∏≤‡∏£‡πÑ‡∏´‡∏•‡∏Ç‡∏≠‡∏á‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï

```
Master
    ‚Üì ‡πÇ‡∏≠‡∏ô‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï
Agent
    ‚Üì ‡πÇ‡∏≠‡∏ô‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï
Member
    ‚Üì ‡πÅ‡∏ó‡∏á‡∏´‡∏ß‡∏¢ (‡πÉ‡∏ä‡πâ‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï)
```

### 8.2 ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ò‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏°

| ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó        | ‡∏£‡∏´‡∏±‡∏™         | ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢                 | ‡∏ú‡∏π‡πâ‡∏ó‡∏≥        |
| ------------- | ------------ | ------------------------ | ------------ |
| ‡πÇ‡∏≠‡∏ô‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï     | `transfer`   | ‡πÇ‡∏≠‡∏ô‡∏à‡∏≤‡∏Å upline ‚Üí downline | Master/Agent |
| ‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏≠‡∏°‡∏°‡∏¥‡∏ä‡∏ä‡∏±‡πà‡∏ô | `commission` | ‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏≠‡∏°‡∏à‡∏≤‡∏Å‡∏¢‡∏≠‡∏î‡πÅ‡∏ó‡∏á          | ‡∏£‡∏∞‡∏ö‡∏ö (auto)  |
| ‡πÄ‡∏á‡∏¥‡∏ô‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•    | `winning`    | ‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å             | ‡∏£‡∏∞‡∏ö‡∏ö (auto)  |
| ‡∏ù‡∏≤‡∏Å‡πÄ‡∏á‡∏¥‡∏ô       | `deposit`    | ‡∏ù‡∏≤‡∏Å‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏∞‡∏ö‡∏ö        | Master       |
| ‡∏ñ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô       | `withdraw`   | ‡∏ñ‡∏≠‡∏ô‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï‡∏≠‡∏≠‡∏Å             | Master/Agent |
| ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏¢‡∏≠‡∏î   | `adjustment` | ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏¢‡∏≠‡∏î‡πÇ‡∏î‡∏¢ Master       | Master       |
| ‡πÅ‡∏ó‡∏á‡∏´‡∏ß‡∏¢        | `bet`        | ‡∏´‡∏±‡∏Å‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÅ‡∏ó‡∏á        | ‡∏£‡∏∞‡∏ö‡∏ö (auto)  |
| ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡πÇ‡∏û‡∏¢     | `bet_cancel` | ‡∏Ñ‡∏∑‡∏ô‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å     | ‡∏£‡∏∞‡∏ö‡∏ö (auto)  |

### 8.3 ‡∏Å‡∏é‡∏Å‡∏≤‡∏£‡πÇ‡∏≠‡∏ô‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï

1. ‚úÖ **‡πÇ‡∏≠‡∏ô‡πÑ‡∏î‡πâ‡πÄ‡∏â‡∏û‡∏≤‡∏∞ downline** ‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏î‡∏¢‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
2. ‚úÖ **‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠** ‡∏Å‡πà‡∏≠‡∏ô‡πÇ‡∏≠‡∏ô
3. ‚úÖ **‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô > 0**
4. ‚úÖ **‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á** (Audit Trail)
5. ‚úÖ **‡πÉ‡∏ä‡πâ Transaction** (‡∏ñ‡πâ‡∏≤‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡∏à‡∏∞ rollback)

### 8.4 ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÇ‡∏≠‡∏ô‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï

```javascript
// Master ‡πÇ‡∏≠‡∏ô‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï‡πÉ‡∏´‡πâ Agent
{
  from_user_id: 'master-uuid',
  to_user_id: 'agent-uuid',
  amount: 50000,
  type: 'transfer',
  note: '‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà 5'
}

// Agent ‡πÇ‡∏≠‡∏ô‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï‡πÉ‡∏´‡πâ Member
{
  from_user_id: 'agent-uuid',
  to_user_id: 'member-uuid',
  amount: 5000,
  type: 'transfer',
  note: '‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï'
}
```

---

## 9. ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (Database Schema)

### 9.1 ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏´‡∏•‡∏±‡∏Å

#### Users

```sql
id                  UUID PRIMARY KEY
username            VARCHAR(50) UNIQUE NOT NULL
name               VARCHAR(50) UNIQUE NOT NULL
password            VARCHAR(255) NOT NULL
role                ENUM('master', 'agent', 'member') NOT NULL
parent_id           UUID REFERENCES users(id)
credit_balance      DECIMAL(15,2) DEFAULT 0
commission_rate     JSONB
status              ENUM('active', 'suspended', 'inactive') DEFAULT 'active'
created_at          TIMESTAMP DEFAULT NOW()
updated_at          TIMESTAMP DEFAULT NOW()

INDEX idx_users_parent_id (parent_id)
INDEX idx_users_role (role)
INDEX idx_users_status (status)
```

**commission_rate format:**

```json
{
  "three_top": 10.0,
  "three_tod": 10.0,
  "two_top": 8.0,
  "two_bottom": 8.0,
  "run_top": 5.0,
  "run_bottom": 5.0
}
```

#### Lottery_Categories

```sql
id                  UUID PRIMARY KEY
code                VARCHAR(50) UNIQUE NOT NULL
name                VARCHAR(100) NOT NULL
draw_schedule       JSONB
payout_rates        JSONB
status              ENUM('active', 'inactive') DEFAULT 'active'
created_at          TIMESTAMP DEFAULT NOW()

INDEX idx_lottery_categories_code (code)
INDEX idx_lottery_categories_status (status)
```

**draw_schedule format:**

```json
{
  "days": ["monday", "friday"],
  "time": "14:30:00",
  "timezone": "Asia/Bangkok"
}
```

**payout_rates format:**

```json
{
  "three_top": 850,
  "three_tod": 150,
  "two_top": 90,
  "two_bottom": 90,
  "run_top": 3.5,
  "run_bottom": 4.5
}
```

#### Lotteries

```sql
id                  UUID PRIMARY KEY
category_id         UUID REFERENCES lottery_categories(id) NOT NULL
draw_date           TIMESTAMP NOT NULL
close_time          TIMESTAMP NOT NULL
status              ENUM('open', 'closed', 'drawn', 'cancelled') DEFAULT 'open'
results             JSONB
created_by          UUID REFERENCES users(id)
created_at          TIMESTAMP DEFAULT NOW()
updated_at          TIMESTAMP DEFAULT NOW()

INDEX idx_lotteries_category_id (category_id)
INDEX idx_lotteries_status (status)
INDEX idx_lotteries_draw_date (draw_date)
```

#### Number_Limits

```sql
id                  UUID PRIMARY KEY
lottery_id          UUID REFERENCES lotteries(id) NOT NULL
bet_type            VARCHAR(20) NOT NULL
number              VARCHAR(10)
max_amount          DECIMAL(15,2) NOT NULL
current_amount      DECIMAL(15,2) DEFAULT 0
is_blocked          BOOLEAN DEFAULT false
alert_sent_80       BOOLEAN DEFAULT false
alert_sent_90       BOOLEAN DEFAULT false
alert_sent_100      BOOLEAN DEFAULT false
created_at          TIMESTAMP DEFAULT NOW()
updated_at          TIMESTAMP DEFAULT NOW()

INDEX idx_number_limits_lottery_id (lottery_id)
INDEX idx_number_limits_bet_type (bet_type)
INDEX idx_number_limits_number (number)
UNIQUE (lottery_id, bet_type, number)
```

#### Default_Number_Limits

```sql
id                  UUID PRIMARY KEY
master_id           UUID REFERENCES users(id) NOT NULL
category_id         UUID REFERENCES lottery_categories(id)
bet_type            VARCHAR(20)
max_amount          DECIMAL(15,2) NOT NULL
is_blocked          BOOLEAN DEFAULT false
created_at          TIMESTAMP DEFAULT NOW()
updated_at          TIMESTAMP DEFAULT NOW()

INDEX idx_default_limits_master_id (master_id)
INDEX idx_default_limits_category_id (category_id)
```

#### Tickets

```sql
id                  UUID PRIMARY KEY
lottery_id          UUID REFERENCES lotteries(id) NOT NULL
user_id             UUID REFERENCES users(id) NOT NULL
agent_id            UUID REFERENCES users(id)
master_id           UUID REFERENCES users(id)
bet_type            VARCHAR(20) NOT NULL
number              VARCHAR(10) NOT NULL
bet_amount          DECIMAL(15,2) NOT NULL
discount_amount     DECIMAL(15,2) DEFAULT 0
net_amount          DECIMAL(15,2) NOT NULL
commission_amount   DECIMAL(15,2) DEFAULT 0
status              ENUM('pending', 'win', 'lose', 'cancelled') DEFAULT 'pending'
win_amount          DECIMAL(15,2)
created_at          TIMESTAMP DEFAULT NOW()
updated_at          TIMESTAMP DEFAULT NOW()

INDEX idx_tickets_lottery_id (lottery_id)
INDEX idx_tickets_user_id (user_id)
INDEX idx_tickets_agent_id (agent_id)
INDEX idx_tickets_status (status)
INDEX idx_tickets_number (number)
INDEX idx_tickets_created_at (created_at)
```

#### Credit_Transactions

```sql
id                  UUID PRIMARY KEY
from_user_id        UUID REFERENCES users(id)
to_user_id          UUID REFERENCES users(id) NOT NULL
amount              DECIMAL(15,2) NOT NULL
type                VARCHAR(20) NOT NULL
reference_id        UUID
balance_before      DECIMAL(15,2) NOT NULL
balance_after       DECIMAL(15,2) NOT NULL
note                TEXT
created_at          TIMESTAMP DEFAULT NOW()

INDEX idx_credit_transactions_from_user (from_user_id)
INDEX idx_credit_transactions_to_user (to_user_id)
INDEX idx_credit_transactions_type (type)
INDEX idx_credit_transactions_created_at (created_at)
INDEX idx_credit_transactions_reference (reference_id)
```

---

## 10. API Endpoints

### 10.1 Authentication

```
POST   /api/v1/auth/login
POST   /api/v1/auth/logout
GET    /api/v1/auth/me
POST   /api/v1/auth/refresh
PUT    /api/v1/auth/change-password
```

### 10.2 Users Management

```
GET    /api/v1/users
POST   /api/v1/users
GET    /api/v1/users/:id
PUT    /api/v1/users/:id
DELETE /api/v1/users/:id
PUT    /api/v1/users/:id/status
PUT    /api/v1/users/:id/commission-rate
GET    /api/v1/users/:id/downline
```

### 10.3 Credits

```
GET    /api/v1/credits/balance
POST   /api/v1/credits/transfer
GET    /api/v1/credits/transactions
GET    /api/v1/credits/summary
```

### 10.4 Lottery Categories

```
GET    /api/v1/lottery-categories
GET    /api/v1/lottery-categories/:id
POST   /api/v1/lottery-categories (Master only)
PUT    /api/v1/lottery-categories/:id (Master only)
DELETE /api/v1/lottery-categories/:id (Master only)
```

### 10.5 Lotteries

```
GET    /api/v1/lotteries
POST   /api/v1/lotteries (Master only)
GET    /api/v1/lotteries/:id
PUT    /api/v1/lotteries/:id (Master only)
DELETE /api/v1/lotteries/:id (Master only)
PUT    /api/v1/lotteries/:id/close (Master only)
POST   /api/v1/lotteries/:id/draw (Master only)
GET    /api/v1/lotteries/active
```

### 10.6 Number Limits (‡πÄ‡∏•‡∏Ç‡∏≠‡∏±‡πâ‡∏ô)

```
GET    /api/v1/lotteries/:lottery_id/limits
POST   /api/v1/lotteries/:lottery_id/limits (Master only)
PUT    /api/v1/lotteries/:lottery_id/limits/:id (Master only)
DELETE /api/v1/lotteries/:lottery_id/limits/:id (Master only)
GET    /api/v1/lotteries/:lottery_id/limits/check

GET    /api/v1/default-limits
POST   /api/v1/default-limits (Master only)
PUT    /api/v1/default-limits/:id (Master only)
DELETE /api/v1/default-limits/:id (Master only)
```

### 10.7 Tickets

```
GET    /api/v1/tickets
POST   /api/v1/tickets
POST   /api/v1/tickets/validate
GET    /api/v1/tickets/:id
DELETE /api/v1/tickets/:id (‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å)
GET    /api/v1/tickets/user/:user_id
GET    /api/v1/tickets/lottery/:lottery_id
```

### 10.8 Reports

```
GET    /api/v1/reports/sales
GET    /api/v1/reports/commissions
GET    /api/v1/reports/winnings
GET    /api/v1/reports/number-sales
GET    /api/v1/reports/daily-summary
GET    /api/v1/reports/agent-performance
```

### 10.9 Results

```
GET    /api/v1/results
GET    /api/v1/results/:lottery_id
POST   /api/v1/results/check
```

### 10.10 Alerts

```
GET    /api/v1/alerts
PUT    /api/v1/alerts/:id/read
DELETE /api/v1/alerts/:id
```

---

## 11. ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢ (Security)

### 11.1 Authentication

**JWT Token:**

```json
{
  "user_id": "uuid",
  "username": "string",
  "role": "master|agent|member",
  "iat": 1706803200,
  "exp": 1707408000
}
```

### 11.2 Authorization Rules

| Role       | ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå                                                                                                                                                  |
| ---------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Master** | - ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö<br>- ‡∏™‡∏£‡πâ‡∏≤‡∏á/‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Agent<br>- ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏≠‡∏°<br>- ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏á‡∏ß‡∏î‡∏´‡∏ß‡∏¢<br>- ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏•‡∏Ç‡∏≠‡∏±‡πâ‡∏ô<br>- ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î                                |
| **Agent**  | - ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡∏™‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á<br>- ‡∏™‡∏£‡πâ‡∏≤‡∏á/‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Member<br>- ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏≠‡∏°‡πÉ‡∏´‡πâ Member<br>- ‡πÇ‡∏≠‡∏ô‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï‡πÉ‡∏´‡πâ Member<br>- ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏™‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á<br>- ‡∏î‡∏π‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏•‡∏Ç‡∏≠‡∏±‡πâ‡∏ô |
| **Member** | - ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô<br>- ‡πÅ‡∏ó‡∏á‡∏´‡∏ß‡∏¢<br>- ‡∏ï‡∏£‡∏ß‡∏à‡∏ú‡∏•‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•<br>- ‡∏î‡∏π‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥<br>- ‡∏î‡∏π‡∏¢‡∏≠‡∏î‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï                                                             |

### 11.3 Data Protection

1. **Password Hashing**: bcrypt (salt rounds: 10)
2. **Input Validation**: Joi/Zod schema validation
3. **SQL Injection**: Protected by Prisma ORM
4. **XSS Prevention**: Sanitize all inputs/outputs
5. **CSRF Protection**: CSRF tokens for state-changing operations
6. **Rate Limiting**:
   - Login: 5 attempts per 15 minutes
   - API: 100 requests per minute per IP
   - Betting: 10 bets per minute per user

### 11.4 Audit Trail

‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ó‡∏∏‡∏Å action ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç:

- ‚úÖ Login/Logout
- ‚úÖ ‡∏™‡∏£‡πâ‡∏≤‡∏á/‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç/‡∏•‡∏ö User
- ‚úÖ ‡πÇ‡∏≠‡∏ô‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï
- ‚úÖ ‡πÅ‡∏ó‡∏á‡∏´‡∏ß‡∏¢
- ‚úÖ ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡πÇ‡∏û‡∏¢
- ‚úÖ ‡∏≠‡∏≠‡∏Å‡∏ú‡∏•‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•
- ‚úÖ ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏≠‡∏°
- ‚úÖ ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏•‡∏Ç‡∏≠‡∏±‡πâ‡∏ô

---

## 12. Error Handling

### 12.1 HTTP Status Codes

| Code | ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢          | ‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠            |
| ---- | ----------------- | ------------------- |
| 200  | OK                | ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à              |
| 201  | Created           | ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à   |
| 400  | Bad Request       | ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• invalid      |
| 401  | Unauthorized      | ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ login        |
| 403  | Forbidden         | ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå         |
| 404  | Not Found         | ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•         |
| 409  | Conflict          | ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ã‡πâ‡∏≥           |
| 422  | Unprocessable     | Validation error    |
| 429  | Too Many Requests | Rate limit exceeded |
| 500  | Internal Error    | ‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡∏£‡∏∞‡∏ö‡∏ö      |

### 12.2 Error Response Format

```json
{
  "error": "ERROR_CODE",
  "message": "Human readable message",
  "details": {
    "field": "field_name",
    "value": "invalid_value",
    "constraint": "must be greater than 0"
  },
  "timestamp": "2025-02-01T10:30:00Z"
}
```

### 12.3 Error Codes

```
AUTH_001: Invalid credentials
AUTH_002: Token expired
AUTH_003: Unauthorized access
AUTH_004: Account suspended

USER_001: User not found
USER_002: Username already exists
USER_003: Cannot create user of higher role
USER_004: Cannot modify parent user
USER_005: Commission rate exceeds parent's rate

CREDIT_001: Insufficient balance
CREDIT_002: Invalid transfer amount
CREDIT_003: Cannot transfer to parent

LOTTERY_001: Lottery not found
LOTTERY_002: Lottery not open
LOTTERY_003: Lottery already closed
LOTTERY_004: Cannot draw unopened lottery
LOTTERY_005: Results already published

TICKET_001: Invalid bet amount
TICKET_002: Invalid number format
TICKET_003: Cannot bet on closed lottery
TICKET_004: Cannot cancel ticket after close time

LIMIT_001: Number blocked
LIMIT_002: Number limit exceeded
LIMIT_003: Invalid limit amount
LIMIT_004: Cannot modify limit after bets placed

SYSTEM_001: Database error
SYSTEM_002: External service unavailable
```

---

## 13. Performance & Scalability

### 13.1 Database Optimization

**Indexes:**

- ‚úÖ Foreign keys
- ‚úÖ Status fields
- ‚úÖ Date/Time fields
- ‚úÖ Frequently queried fields

**Query Optimization:**

- ‚úÖ Use Prisma includes sparingly
- ‚úÖ Pagination for large datasets
- ‚úÖ Aggregate queries for reports
- ‚úÖ Avoid N+1 queries

### 13.2 Caching Strategy

**Redis Caching:**

```javascript
// Cache lottery data (15 minutes)
cache.set(`lottery:${id}`, data, 900);

// Cache number limits (5 minutes)
cache.set(`limits:${lottery_id}`, data, 300);

// Cache user data (1 hour)
cache.set(`user:${id}`, data, 3600);
```

### 13.3 Real-time Updates

**WebSocket Events:**

```javascript
// Alert ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏Ç‡πÉ‡∏Å‡∏•‡πâ‡πÄ‡∏ï‡πá‡∏°
ws.emit('number_limit_alert', {
  lottery_id,
  number,
  percentage: 90,
  current_amount: 9000,
  max_amount: 10000,
});

// ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏¢‡∏≠‡∏î‡πÄ‡∏•‡∏Ç‡∏≠‡∏±‡πâ‡∏ô‡πÅ‡∏ö‡∏ö Real-time
ws.emit('number_limit_update', {
  lottery_id,
  number,
  current_amount: 9500,
});
```

---

## 14. Testing Strategy

### 14.1 Unit Tests

- ‚úÖ ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î
- ‚úÖ ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏≠‡∏°
- ‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏•‡∏Ç‡∏ñ‡∏π‡∏Å‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•
- ‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏•‡∏Ç‡∏≠‡∏±‡πâ‡∏ô
- ‚úÖ Validation functions

### 14.2 Integration Tests

- ‚úÖ Authentication flow
- ‚úÖ User hierarchy creation
- ‚úÖ Credit transfer
- ‚úÖ Betting process
- ‚úÖ Number limit enforcement
- ‚úÖ Drawing process

### 14.3 E2E Tests

- ‚úÖ ‡∏™‡∏£‡πâ‡∏≤‡∏á Agent ‡πÅ‡∏•‡∏∞ Member
- ‚úÖ ‡πÇ‡∏≠‡∏ô‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï
- ‚úÖ ‡πÅ‡∏ó‡∏á‡∏´‡∏ß‡∏¢‡∏à‡∏ô‡∏ñ‡∏∂‡∏á‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•
- ‚úÖ ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÄ‡∏•‡∏Ç‡∏≠‡∏±‡πâ‡∏ô
- ‚úÖ ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Alert

---

## 15. Deployment

### 15.1 Environment Variables

```bash
# Database
DATABASE_URL=postgresql://user:pass@host:5432/lottery_db

# JWT
JWT_SECRET=your-secret-key-here
JWT_EXPIRES_IN=7d

# Server
PORT=3000
NODE_ENV=production

# Frontend
REACT_APP_API_URL=https://api.lottery.com
REACT_APP_WS_URL=wss://api.lottery.com

# Redis
REDIS_URL=redis://localhost:6379

# Email (optional)
SMTP_HOST=smtp.gmail.com
SMTP_USER=noreply@lottery.com
SMTP_PASS=password

# SMS (optional)
SMS_API_KEY=your-sms-api-key
```

### 15.2 Deployment Checklist

**Backend:**

- [ ] Build JavaScript
- [ ] Run Prisma migrations
- [ ] Set environment variables
- [ ] Configure CORS
- [ ] Set up SSL/TLS
- [ ] Configure Nginx reverse proxy
- [ ] Set up monitoring (PM2/Docker)
- [ ] Configure logging
- [ ] Set up Redis
- [ ] Configure WebSocket

**Frontend:**

- [ ] Build production bundle
- [ ] Optimize assets
- [ ] Configure CDN
- [ ] Set API endpoints
- [ ] Enable compression
- [ ] Configure caching headers

**Database:**

- [ ] Backup strategy
- [ ] Regular maintenance schedule
- [ ] Monitor performance
- [ ] Set up replication (optional)

---

## 16. Monitoring & Alerts

### 16.1 System Monitoring

**Metrics:**

- CPU usage
- Memory usage
- Disk space
- Network I/O
- Database connections
- API response time
- Error rate

**Tools:**

- PM2 monitoring
- PostgreSQL pg_stat_statements
- Redis INFO command

### 16.2 Business Alerts

**Alert Types:**

1. **‡πÄ‡∏•‡∏Ç‡∏≠‡∏±‡πâ‡∏ô 80%** üü°

   ```
   ‡πÄ‡∏•‡∏Ç 456 ‡∏ã‡∏∑‡πâ‡∏≠‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß 80%
   ‚Üí ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô Master
   ```

2. **‡πÄ‡∏•‡∏Ç‡∏≠‡∏±‡πâ‡∏ô 90%** üü†

   ```
   ‡πÄ‡∏•‡∏Ç 456 ‡∏ã‡∏∑‡πâ‡∏≠‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß 90%
   ‚Üí ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÄ‡∏£‡πà‡∏á‡∏î‡πà‡∏ß‡∏ô Master
   ```

3. **‡πÄ‡∏•‡∏Ç‡∏≠‡∏±‡πâ‡∏ô‡πÄ‡∏ï‡πá‡∏° 100%** üî¥

   ```
   ‡πÄ‡∏•‡∏Ç 456 ‡∏ã‡∏∑‡πâ‡∏≠‡πÄ‡∏ï‡πá‡∏° 100%
   ‚Üí ‡∏õ‡∏¥‡∏î‡∏£‡∏±‡∏ö‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ + ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô Master
   ```

4. **‡∏¢‡∏≠‡∏î‡∏ñ‡∏π‡∏Å‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏™‡∏π‡∏á** üí∞

   ```
   ‡∏á‡∏ß‡∏î‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏ú‡∏π‡πâ‡∏ñ‡∏π‡∏Å‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏• 500,000 ‡∏ö‡∏≤‡∏ó
   ‚Üí ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô Master
   ```

5. **‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï‡∏ï‡πà‡∏≥** ‚ö†Ô∏è
   ```
   Agent/Member ‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏ï‡πà‡∏≥‡∏Å‡∏ß‡πà‡∏≤ threshold
   ‚Üí ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
   ```

---

## 17. Future Enhancements

### 17.1 Phase 2 Features

- üì± Mobile App (React Native)
- üîî Push Notifications
- üí¨ Live Chat Support
- üìä Advanced Analytics Dashboard
- üé® Customizable UI Themes
- üåç Multi-language (EN/TH/LA)
- üìà Predictive Analytics

### 17.2 Phase 3 Features

- ü§ñ AI Fraud Detection
- üéØ Marketing Automation
- üí≥ Payment Gateway Integration
- üì± SMS OTP Verification
- üîó API for Third-party Integration
- üìä Business Intelligence Tools

---

## 18. Glossary

| ‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå        | ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢                            |
| -------------- | ----------------------------------- |
| Master         | ‡πÄ‡∏à‡πâ‡∏≤, ‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö, ‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡πÅ‡∏ó‡∏á‡∏´‡∏ß‡∏¢     |
| Agent          | ‡∏ï‡∏±‡∏ß‡πÅ‡∏ó‡∏ô, ‡∏ï‡∏±‡∏ß‡∏Å‡∏•‡∏≤‡∏á                     |
| Member         | ‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å, ‡∏ú‡∏π‡πâ‡πÅ‡∏ó‡∏á‡∏´‡∏ß‡∏¢                   |
| Commission     | ‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏≠‡∏°‡∏°‡∏¥‡∏ä‡∏ä‡∏±‡πà‡∏ô, ‡∏Ñ‡πà‡∏≤‡∏ï‡∏≠‡∏ö‡πÅ‡∏ó‡∏ô (= ‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î) |
| Discount       | ‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î (= ‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏≠‡∏°)                   |
| Upline         | ‡∏ú‡∏π‡πâ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ö‡∏ô                   |
| Downline       | ‡∏ú‡∏π‡πâ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏•‡πà‡∏≤‡∏á                 |
| Payout         | ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏à‡πà‡∏≤‡∏¢‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•                     |
| Draw           | ‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•                        |
| Ticket         | ‡πÇ‡∏û‡∏¢, ‡πÉ‡∏ö‡πÅ‡∏ó‡∏á                          |
| Number Limit   | ‡πÄ‡∏•‡∏Ç‡∏≠‡∏±‡πâ‡∏ô, ‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏¢‡∏≠‡∏î‡∏£‡∏±‡∏ö‡∏ã‡∏∑‡πâ‡∏≠            |
| Blocked Number | ‡πÄ‡∏•‡∏Ç‡∏õ‡∏¥‡∏î‡∏£‡∏±‡∏ö                           |
| Alert          | ‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô                        |
| Stake          | ‡∏¢‡∏≠‡∏î‡πÄ‡∏î‡∏¥‡∏°‡∏û‡∏±‡∏ô                          |
| Net Amount     | ‡∏¢‡∏≠‡∏î‡∏™‡∏∏‡∏ó‡∏ò‡∏¥ (‡∏´‡∏•‡∏±‡∏á‡∏´‡∏±‡∏Å‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î)            |

---

**Document Version**: 1.0.0  
**Last Updated**: 2025-02-01  
**Status**: Active

**Prepared by**: Development Team  
**Approved by**: Master/Owner

---

## ‡∏™‡∏£‡∏∏‡∏õ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç

### ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏∞‡∏ö‡∏ö:

```
Master (‡πÄ‡∏à‡πâ‡∏≤)
  ‚îî‚îÄ‚îÄ Agent (‡∏ï‡∏±‡∏ß‡πÅ‡∏ó‡∏ô)
      ‚îî‚îÄ‚îÄ Member (‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å)
```

### ‡∏à‡∏∏‡∏î‡πÄ‡∏î‡πà‡∏ô‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö:

1. ‚úÖ **‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏≠‡∏° = ‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î** (‡πÑ‡∏°‡πà‡πÅ‡∏¢‡∏Å)
2. ‚úÖ **‡πÅ‡∏¢‡∏Å‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏ï‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏´‡∏ß‡∏¢** (3‡∏ï‡∏±‡∏ß‡∏ö‡∏ô, 2‡∏ï‡∏±‡∏ß‡∏ö‡∏ô, ‡∏Ø‡∏•‡∏Ø)
3. ‚úÖ **4 ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏´‡∏ß‡∏¢** (‡∏£‡∏±‡∏ê‡∏ö‡∏≤‡∏•, ‡∏•‡∏≤‡∏ß, ‡∏Æ‡∏≤‡∏ô‡∏≠‡∏¢ 2 ‡πÅ‡∏ö‡∏ö)
4. ‚úÖ **‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏•‡∏Ç‡∏≠‡∏±‡πâ‡∏ô‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞** ‡∏û‡∏£‡πâ‡∏≠‡∏° Alert
5. ‚úÖ **‡∏£‡∏ß‡∏°‡∏¢‡∏≠‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏£‡∏∞‡∏ö‡∏ö** (‡πÑ‡∏°‡πà‡πÅ‡∏¢‡∏Å Agent)
6. ‚úÖ **Master ‡πÄ‡∏õ‡πá‡∏ô‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡πÅ‡∏ó‡∏á** (‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏≠‡∏°)
7. ‚úÖ **Agent ‡∏°‡∏µ‡πÑ‡∏î‡πâ‡πÅ‡∏Ñ‡πà Member** (‡πÑ‡∏°‡πà‡∏°‡∏µ Agent ‡∏•‡∏π‡∏Å)
